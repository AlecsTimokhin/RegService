DROP TABLE USER_ROLES IF EXISTS;
DROP TABLE USERS IF EXISTS;


CREATE TABLE USERS
(
    ID         BIGINT          GENERATED BY DEFAULT AS IDENTITY (START WITH 1000 INCREMENT BY 1) PRIMARY KEY,
    ACTIVE     BOOLEAN         NOT NULL,
    USERNAME   VARCHAR(255)    NOT NULL,
    PASSWORD   VARCHAR(255)    NOT NULL,
    BALANCE    INT             NOT NULL
);

CREATE UNIQUE INDEX users_unique_username_idx ON USERS (USERNAME);


CREATE TABLE USER_ROLES
(
    USER_ID       BIGINT          NOT NULL,
    ROLE          VARCHAR(255)    NOT NULL,
    CONSTRAINT user_roles_idx UNIQUE (USER_ID, ROLE),
    FOREIGN KEY (USER_ID) REFERENCES USERS (ID) ON DELETE CASCADE
);

