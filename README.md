<div style="line-height:1.5;">

Александр Тимохин<br>
alecsander.timokhin@yandex.ru<br>
<hr>

<h3>Описание Проекта</h3>

Настоящий Проект является <b>REST-full</b> сервисом авторизации и регистрации новых пользователей (далее Сервис).

На Сервисе представлены две роли пользователей:
- обычные пользователи (<b>User</b>);
- администраторы Сервиса (<b>Admin</b>).

Не авторизированный пользователь <b>Anonimus</b> может просматривать только главную страницу и страницу входа на Cервис. 
Кроме того, он может зарегистрировать нового пользователя:
- установить логин новому пользователю от 3 до 30 символов длинной;
- установить пароль новому пользователю от 2 до 20 символов длинной.

После регистрации, новому пользователю будет присвоен нулевой баланс и роль <b>User</b>.

<b>User</b> может совершать все действия, что и <b>Anonimus</b>, кроме регистрации нового пользователя, 
просматривать страницу со своим балансом, выходить из системы.

<b>Admin</b> может совершать все действия, что и <b>User</b>, просматривать список всех пользователей (с их ролями), 
в том числе по <b>REST</b>, регистрировать нового пользователя с возможностью устанавливать ему роли, но не менее одной.

Для общения с клиентом по <b>REST</b> используется сложный объект <b>RestResponce</b>.
Он содержит следующие поля:
- код ответа HTTP-сервера (передается в <b>ResponseEntity</b>);
- сообщение;
- статус;
- список ошибок при валидации каждого поля для регистрации нового пользователя;
- "код ошибки".

При регистрации нового пользователя, клиенту по <b>REST</b> в числе прочих параметров передается "код ошибки" (errorCode) 
внутри сложного объекта <b>RestResponce</b>.

Если регистрация нового пользователя прошла успешно, то выдается код 0.

Если при регистрации нового пользователя выяснилось, что пользователь с таким логином уже существует, то выдается код 1.

В случае ошибки на стороне сервера выдается код 2.

<br>

При каждой авторизации клиенту передается "код ошибки" (errorCode).
 
Если авторизация прошла успешно, то выдается код 0.

Если пользователь с требуемым логином не найден, то выдается код 3 с соответствующим сообщением.

Если введенный пароль не совпадает с паролем требуемого пользователя, то выдается код 4 с соответствующим сообщением.  

<hr>


<h3>Запуск Проекта</h3>

Проект полностью рабочий.

Перед запуском Проекта обратите внимание на константы файла <b>application.properties</b>:
<br><br>
Для запуска Проекта необходимо запустить главный метод файла <b>Application.java</b>.
<br><br>
После запуска, Проект доступен по адресу http://localhost:8080/.
<br><br>
<b>Вход на сервис</b>:<br>
как <b>Admin</b> (логин: <b>Admin</b> пароль: <b>123</b>);<br>
как <b>User</b> (логин: <b>User</b>, пароль: <b>123</b>).
<hr>


<h3>Используемый стек технологий Проекта</h3>

Проект построен на <b>Spring Boot</b> с использованием <b>Spring MVC</b>, <b>Spring JDBC</b> (без ORM!), <b>Spring Security</b>. 
Пароли пользователей хешируются алгоритмом <b>BCrypt</b>

В качестве базы данных используется встроенная <b>HSQL_DB</b>. При старте Проекта в ней инициализируется определенный набор данных.

В качестве <b>View</b> используется <b>ViewResolver</b> <b>Thymeleaf</b>.

Для проверки прав пользователя перед каждым запросом (кроме статических файлов) используется интерцептор <b>SecurityInterceptor.java</b>.

Регистрация нового пользователя осуществляется по <b>REST</b> через <b>AJAX</b> (<b>jQuery</b>).

При добавлении нового пользователя производится предварительная валидация в валидаторе <b>UserToValidator.java</b> 
средствами <b>Spring Binding</b>, <b>Spring Validation</b>.

На сервисе предусмотрена обработка ошибки 404, а также внутренних ошибок сервера в файле <b>ControllerExceptionHandler.java</b>. 
При наличие ошибок на стророне сервера, клиенту передается "код ошибки" равный 2. 

На Сервиве обрабатываются все исключительные ситуации. Используются пользовательские исключения, 
наследуемые от <b>RuntimeException</b>, обработка которых происходит в <b>RestControllerExceptionHandler.java</b>. 
При наличие ошибок на стророне сервера, клиенту передается "код ошибки" (errorCode = 2) внутри сложного объекта <b>RestResponce</b>. 

На Сервисе предусмотрена защита от <b>XSS</b> и <b>CSRF</b> атак.

</div>
